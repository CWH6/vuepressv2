import{_ as n,o as s,c as a,e}from"./app-3_tfkmjO.js";const t={},p=e(`<h3 id="ğŸŒfeignæœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#ğŸŒfeignæœåŠ¡è°ƒç”¨" aria-hidden="true">#</a> ğŸŒFeignæœåŠ¡è°ƒç”¨</h3><p><strong>Feign</strong> æ˜¯ä¸€ä¸ªå£°æ˜å¼ã€æ¨¡æ¿åŒ–çš„ HTTP å®¢æˆ·ç«¯ï¼Œå®ƒç®€åŒ–äº†å¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ã€‚Feign å¯ä»¥å°† HTTP è¯·æ±‚è½¬æ¢ä¸º Java æ¥å£çš„æ–¹æ³•è°ƒç”¨ï¼Œè®©æœåŠ¡ä¹‹é—´çš„è°ƒç”¨çœ‹èµ·æ¥åƒæ˜¯è°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•å’Œç›´è§‚ã€‚</p><h3 id="ğŸ“¦ä½¿ç”¨-feign-è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„åŸºæœ¬æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#ğŸ“¦ä½¿ç”¨-feign-è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„åŸºæœ¬æ­¥éª¤" aria-hidden="true">#</a> ğŸ“¦ä½¿ç”¨ Feign è¿›è¡ŒæœåŠ¡è°ƒç”¨çš„åŸºæœ¬æ­¥éª¤ï¼š</h3><p><strong>å¼•å…¥ Feign ä¾èµ–</strong>ï¼š</p><p>é¦–å…ˆï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­å¼•å…¥ Feign çš„ä¾èµ–ï¼Œæ¯”å¦‚ä½¿ç”¨ Mavenï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯ç”¨ Feign å®¢æˆ·ç«¯</strong>ï¼š</p><p>åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­ï¼Œéœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ  <code>@EnableFeignClients</code> æ³¨è§£æ¥å¯ç”¨ Feign å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åˆ›å»º Feign æ¥å£</strong>ï¼š</p><p>åˆ›å»ºä¸€ä¸ª Java æ¥å£ï¼Œå¹¶ä½¿ç”¨ <code>@FeignClient</code> æ³¨è§£æ¥æ ‡è®°è¿™ä¸ªæ¥å£ä½œä¸º Feign å®¢æˆ·ç«¯ã€‚åœ¨æ¥å£ä¸­å®šä¹‰æœåŠ¡è°ƒç”¨çš„æ–¹æ³•å’Œå¯¹åº”çš„ URL è·¯å¾„ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;other-service&quot;</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:8081&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OtherServiceClient</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/api/resource&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œä½¿ç”¨ <code>@FeignClient</code> æ³¨è§£æ¥æŒ‡å®šè¦è°ƒç”¨çš„æœåŠ¡åç§°ï¼ˆ<code>other-service</code>ï¼‰å’ŒæœåŠ¡çš„åŸºç¡€ URLï¼ˆ<code>http://localhost:8081</code>ï¼‰ï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ª <code>getResource()</code> æ–¹æ³•æ¥å¯¹åº”æœåŠ¡çš„ <code>/api/resource</code> è·¯å¾„ã€‚</p><p><strong>ä½¿ç”¨ Feign å®¢æˆ·ç«¯</strong>ï¼š</p><p>åœ¨éœ€è¦è°ƒç”¨å…¶ä»–æœåŠ¡çš„åœ°æ–¹ï¼Œç›´æ¥æ³¨å…¥ Feign æ¥å£ï¼Œå¹¶è°ƒç”¨å…¶å®šä¹‰çš„æ–¹æ³•å³å¯ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">OtherServiceClient</span> otherServiceClient<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">callOtherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> otherServiceClient<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Feign å°†ä¼šæ ¹æ®æ¥å£çš„å®šä¹‰ï¼ŒåŠ¨æ€åœ°ç”Ÿæˆä¸€ä¸ªç¬¦åˆå®šä¹‰çš„ HTTP è¯·æ±‚ï¼Œç„¶åå‘é€ç»™æŒ‡å®šçš„æœåŠ¡ã€‚</p><p><strong>é…ç½® Feign å®¢æˆ·ç«¯</strong>ï¼š</p><p>å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Feign è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ¯”å¦‚è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ã€é‡è¯•ç­–ç•¥ç­‰ï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">other-service</span><span class="token punctuation">:</span>
        <span class="token key atrule">connectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
        <span class="token key atrule">readTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œé…ç½®äº†å¯¹åä¸º <code>other-service</code> çš„æœåŠ¡çš„è¿æ¥è¶…æ—¶æ—¶é—´å’Œè¯»å–è¶…æ—¶æ—¶é—´ä¸º 5 ç§’ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒFeign ç®€åŒ–äº†å¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡ä¹‹é—´çš„è°ƒç”¨ï¼Œé€šè¿‡å£°æ˜å¼çš„æ¥å£å®šä¹‰å’Œè‡ªåŠ¨ç”Ÿæˆ HTTP è¯·æ±‚ï¼Œä½¿å¾—æœåŠ¡è°ƒç”¨ä»£ç æ›´åŠ æ¸…æ™°ã€ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚åŒæ—¶ï¼ŒFeign è¿˜é›†æˆäº† Ribbon è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»å’Œå®¹é”™ç­‰åŠŸèƒ½ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</p>`,22),c=[p];function o(i,l){return s(),a("div",null,c)}const r=n(t,[["render",o],["__file","Feign.html.vue"]]);export{r as default};
